<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="api">
	<insert id="searchWeatherLogInsert" parameterType="com.hostate.api.vo.Tb_weather_search_scope_info">
		insert into tb_weather_search_scope_info(
			user_id,
		    user_name,
		    start_date,
		    end_date,
		    create_date,
		    create_user_name,
		    update_date,
		    update_user_name
		    )
		values(
			#{user_id},
			#{user_name}, 
			#{start_date}, 
			#{end_date},
			now(),
			#{user_name},
			now(),
			#{user_name}
			);
	</insert>
	<select id="selectSearchInfo" parameterType="com.hostate.api.vo.PageVo" resultType="com.hostate.api.vo.Tb_weather_search_scope_info">
		select 
			numrow,
			user_id, 
			user_name,
			start_date,
			end_date,
			create_date
		from (
		        select
					 ROW_NUMBER() OVER(ORDER BY no desc) AS numrow,
					 user_id as user_id,
					 user_name as user_name,
					 start_date as start_date,
					 end_date as end_date,
					 create_date as create_date 
			    from tb_weather_search_scope_info 
	            )t
		WHERE numrow BETWEEN (#{pageNo}-1)*10 + 1 AND (#{pageNo})*10
	</select>
</mapper>
